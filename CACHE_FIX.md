# 解决"打开index.html还是英文"问题

## 问题原因
浏览器缓存了旧的数据，导致应用加载的仍是之前的英文版本。

## 快速解决方案 (3选1)

### ✅ 方案1: 使用应用内按钮 (最简单)
1. 打开 `index.html`
2. 点击左侧 **"💾 数据"** 标签
3. 点击 **"🔄 清除缓存重新加载"** 按钮
4. 点击 **"确定"** 确认
5. 页面自动重新加载中文数据！

**这是最推荐的方法！**

---

### ✅ 方案2: 浏览器开发者工具清除缓存
#### Chrome/Edge/Firefox:
1. 打开 `index.html`
2. 按 `F12` 打开开发者工具
3. 右键点击浏览器地址栏左边的刷新按钮
4. 选择 **"清空缓存并硬刷新"** 或 **"empty cache and hard refresh"**
5. 页面会重新加载，这次应该是中文了

#### Safari:
1. 打开 `index.html`
2. 菜单 → 开发 → 清空所有缓存
3. 刷新页面

---

### ✅ 方案3: 完全清除浏览器数据
#### Chrome/Edge:
1. 打开浏览器设置
2. 隐私和安全 → 清除浏览数据
3. 勾选 "Cookies及其他网站数据"
4. 点击 "清除数据"
5. 重新打开 `index.html`

#### Firefox:
1. 打开浏览器菜单
2. 隐私和安全 → 历史 → 清除最近的历史记录
3. 时间范围: 全部
4. 勾选 "Cookie" 和 "网站离线存储数据"
5. 点击 "清除"

---

## 推荐流程

```
1️⃣ 打开 index.html
   ↓
2️⃣ 左侧点 💾 数据 标签
   ↓
3️⃣ 点 🔄 清除缓存重新加载
   ↓
4️⃣ 确认
   ↓
✅ 完成！现在应该是中文了
```

---

## 技术说明

应用使用浏览器的 `localStorage` 保存用户数据。当首次访问时，如果有旧数据，会优先加载旧数据而不是新的中文数据。

**解决方案已更新为**:
- 添加版本标记 (`v2.0-cn`)
- 如果版本不匹配，自动加载新数据
- 添加手动清除缓存按钮

---

## 如果还是不行？

### 检查清单:
- [ ] 确保已保存修改的 `app.js`
- [ ] 确保 `knowledge-map-cn.json` 文件存在
- [ ] 用 Ctrl+Shift+Delete 完全清除浏览器缓存
- [ ] 用不同浏览器试试（排除浏览器特定问题）
- [ ] 检查浏览器控制台（F12）是否有错误信息

### 浏览器控制台错误排查:
按 `F12` 打开控制台，查看是否有错误：
- **404 knowledge-map-cn.json not found**: 确保文件在项目根目录
- **localStorage error**: 浏览器可能禁用了本地存储，检查隐私设置
- **其他JS错误**: 可能是缓存的旧脚本冲突

---

## 最终大招 - 重新启动应用

```bash
# 1. 停止HTTP服务器 (如果在运行)
# 按 Ctrl+C

# 2. 清除Python缓存
rmdir __pycache__ /s /q 2>nul

# 3. 重新启动
cd d:\code\knowledge-map
python -m http.server 8000
```

然后在浏览器中访问 `http://localhost:8000`，按方案1清除缓存。

---

## 为什么会这样?

这是web应用的常见问题：
- 浏览器缓存了旧版本的HTML、CSS、JS
- localStorage中的旧数据被优先加载
- 即使服务器更新了文件，浏览器仍使用缓存版本

**已通过以下方式改进**:
✅ 添加了版本检查机制
✅ 添加了手动清除缓存按钮  
✅ 添加了缓存破坏参数（时间戳）

---

**如果成功加载了中文版本，你应该看到**:
- ✅ 所有节点标签都是中文
- ✅ 顶部有中文概念标签（计算机科学、数学基础、系统设计等）
- ✅ 点击标签可以过滤显示相关节点
- ✅ 左侧各个标签都是中文

**祝你顺利！** 🎉
